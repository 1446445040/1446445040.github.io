# 问题

1. 为实现缩进，目录结构包含许多列表嵌套，逻辑冗长，且性能不佳，页面加载过慢。
2. 单个页面过于庞大，接近300行，在进行功能拓展和日常维护的时候，需要反复翻动，效率低下。
3. 文章代码块高亮，计算量大，导致页面加载时明显卡顿，体验较差

 

# 解决方案

1. 简化目录算法，仅使用单层列表，通过添加不同的类来实现缩进。简化后仅需10行即可生成目录结构，代码量减少90%，且卡顿现象明显降低。
2. 分析决定将页面内容拆分为组件：目录组件，文章组件，评论组件，并重新布局。优化结束后每个组件代码量适中，结构更加清晰便于管理的同时，增加了可复用性。
3. 使用worker将计算任务分配到后台，待计算结束返回结果后再进行相关替换。优化后页面流畅无卡顿

# MongoDB

## 缺点

不支持事务操作，不支持复杂查询如多张表的join操作

 

## 优点

文档模型非常灵活，拓展性强

 非常适合文档化格式的存储及查询

## 相比于MySql等关系数据库

关系数据库的表结构固定，扩展起来比较麻烦，必须先定义好表结构才能插入对应字段